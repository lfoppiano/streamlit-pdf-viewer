(()=>{"use strict";var e={2707:(e,t,n)=>{var r=n(3751),a=n(641);const i={id:"app"};function o(e,t,n,r,o,s){const l=(0,a.g2)("PdfViewer"),d=(0,a.g2)("WithStreamlitConnection");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(d,null,{default:(0,a.k6)((({args:e})=>[(0,a.bF)(l,{args:e},null,8,["args"])])),_:1})])}var s=n(33);const l={key:0},d={key:1},c=["src","width","height"],p={key:2},h=["src","width","height"],g={key:3};function u(e,t,n,r,i,o){return(0,a.uX)(),(0,a.CE)("div",{id:"pdfContainer",style:(0,s.Tr)(r.pdfContainerStyle)},["unwrap"===n.args.rendering?((0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("div",{id:"pdfViewer",style:(0,s.Tr)(r.pdfViewerStyle)},null,4)])):"legacy_embed"===n.args.rendering?((0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("embed",{src:`data:application/pdf;base64,${n.args.binary}`,width:`${n.args.width}`,height:`${n.args.height}`,type:"application/pdf"},null,8,c)])):"legacy_iframe"===n.args.rendering?((0,a.uX)(),(0,a.CE)("div",p,[(0,a.Lk)("embed",{src:`data:application/pdf;base64,${n.args.binary}`,width:`${n.args.width}`,height:`${n.args.height}`,type:"application/pdf"},null,8,h)])):((0,a.uX)(),(0,a.CE)("div",g," Error rendering option. "))],4)}n(4114),n(8111),n(2489),n(7588);var v=n(953),w=(n(951),n(9936)),y=n(7445),f=n(2543);const m="pdfjs-dist/cmaps/",b=!0,_=!0,x=["solid","dashed","dotted","double","groove","ridge","inset","outset","none",void 0,null],E={props:["args"],setup(e){const t=(0,v.KR)(0),n=(0,v.KR)(0),r=(0,v.KR)([]),i=(0,v.KR)([]),o=(0,v.KR)([]),s=(0,v.KR)(e.args.height||0),l=(e.args.pages_to_render.length,!0===e.args.render_text),d=(e,t=window.innerWidth)=>{if("string"===typeof e&&e.endsWith("%")){const t=parseFloat(e);if(!isNaN(t))return{type:"percent",value:t/100}}const n=Number(e);return!isNaN(n)&&n>0?{type:"pixel",value:n}:{type:"pixel",value:t}},c=(0,a.EW)((()=>{const t=d(e.args.width,window.innerWidth),n="percent"===t.type?100*t.value+"%":`${t.value}px`;return{width:n,height:e.args.height?`${e.args.height}px`:"auto",overflow:"auto",position:"relative"}})),p={position:"relative"},h=e=>{e&&(e.innerHTML="")},g=(t,n,r,a,i=1)=>{const o=t.getViewport({scale:n,rotation:r}),s=(window.devicePixelRatio||1)*i,l=document.createElement("canvas");return l.id=`canvas_page_${a}`,l.height=o.height*s+e.args.pages_vertical_spacing,l.width=o.width*s,l.style.width=`${o.width}px`,l.style.height=`${o.height}px`,l.style.display="block",l.style.marginBottom=`${e.args.pages_vertical_spacing}px`,l.getContext("2d").scale(s,s),l},u=(t,n,r)=>{const a=document.createElement("div");a.id=`annotation-${t.id||t.page}-${t.index}`,a.setAttribute("data-index",t.index),a.style.position="absolute",a.style.left=t.x*r+"px",a.style.top=t.y*r+"px",a.style.width=t.width*r+"px",a.style.height=t.height*r+"px";let i=t.border;t.border&&x.includes(t.border)||(i="solid"),a.style.outline=`${e.args.annotation_outline_size*r}px ${i} ${t.color}`,a.style.cursor=l?"text":"pointer",a.style.pointerEvents=l?"none":"auto",a.style.zIndex=10,l||a.addEventListener("click",(()=>{y.wk.setComponentValue({clicked_annotation:{index:t.index,...t}})})),n.appendChild(a)},E=async(e,t,n,r)=>{const a={canvasContext:t.getContext("2d"),viewport:n};await e.render(a).promise;const i=document.createElement("div");i.className="page",i.style.position="relative",i.style.width=`${n.width}px`,i.style.height=`${n.height}px`;const o=document.createElement("div");if(o.className="canvasWrapper",o.style.position="absolute",o.style.top="0",o.style.left="0",o.appendChild(t),i.appendChild(o),l){const t=await e.getTextContent(),r=document.createElement("div");r.className="textLayer",r.style.zIndex="11",r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.height=`${n.height}px`,r.style.width=`${n.width}px`;const a=new w.D6({textContentSource:t,container:r,viewport:n,textDivs:[]});await a.render(),i.appendChild(r)}r&&r.length>0&&r.forEach((e=>{u(e,i,n.scale)}));const s=document.getElementById("pdfViewer");s.appendChild(i)},k=t=>0===e.args.pages_to_render.length?Array.from({length:t},((e,t)=>t+1)):e.args.pages_to_render,C=async(a,s,l)=>{t.value=0,r.value=[],i.value=[],o.value=[];const d=e.args.resolution_boost||1;for(let c=1;c<=a.numPages;c++){const p=await a.getPage(c),h=p.rotate,u=p.getViewport({scale:1,rotation:h});if(e.args.height>0){const t=u.width/u.height,r=t*e.args.height;(0===n.value||r<n.value)&&(n.value=r)}const v=n.value/u.width;if(r.value.push(v),i.value.push(u.height),l.includes(c)){const n=g(p,v,h,c,d);s.style.setProperty("--scale-factor",v);const r=p.getViewport({scale:v,rotation:h,intent:"print"}),a=e.args.annotations.filter((e=>Number(e.page)===c));t.value+=n.height/((window.devicePixelRatio||1)*d),await E(p,n,r,a),n.id&&o.value.push(n.id)}}l.length>0&&(t.value-=e.args.pages_vertical_spacing)},$=e=>{window.alert(e.message),console.error(e)},R=async e=>{w.EA.workerSrc="pdfjs-dist/build/pdf.worker.mjs";try{const t=(0,w.YE)({url:e,cMapUrl:m,cMapPacked:b,enableXfa:_}),n=await t.promise,r=document.getElementById("pdfViewer");h(r);const a=k(n.numPages);await C(n,r,a),V()}catch(t){$(t)}},V=()=>{if(e.args.scroll_to_page){const t=document.getElementById(`canvas_page_${e.args.scroll_to_page}`);t&&t.scrollIntoView({behavior:"smooth"})}else if(e.args.scroll_to_annotation){const t=document.querySelector(`[id^="annotation-"][data-index="${e.args.scroll_to_annotation}"]`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}},N=()=>{const n=e.args.height||t.value;n!==s.value&&(y.wk.setFrameHeight(n),s.value=n)},L=()=>{const t=d(e.args.width,window.innerWidth);let r;r="percent"===t.type?Math.min(Math.floor(t.value*window.innerWidth),window.innerWidth):Math.min(t.value,window.innerWidth),r!==n.value&&(n.value=r)},W=async()=>{try{if(console.log("handleResize"),"unwrap"===e.args.rendering){const t=`data:application/pdf;base64,${e.args.binary}`;L(),await R(t),N()}}catch(t){console.error(t)}},O=(0,f.debounce)(W,200);return(0,a.sV)((()=>{O(),window.addEventListener("resize",O)})),(0,a.hi)((()=>{window.removeEventListener("resize",O)})),{pdfContainerStyle:c,pdfViewerStyle:p}}};var k=n(6262);const C=(0,k.A)(E,[["render",u]]),$=C,R={key:0},V={class:"err__msg"};function N(e,t,n,r,i,o){return(0,a.uX)(),(0,a.CE)("div",null,[""!=e.componentError?((0,a.uX)(),(0,a.CE)("div",R,[t[0]||(t[0]=(0,a.Lk)("h1",{class:"err__title"},"Component Error",-1)),(0,a.Lk)("div",V,"Message: "+(0,s.v_)(e.componentError),1)])):null!=e.renderData?(0,a.RG)(e.$slots,"default",{key:1,args:e.renderData.args,disabled:e.renderData.disabled},void 0,!0):(0,a.Q3)("",!0)])}const L=(0,a.pM)({name:"WithStreamlitConnection",setup(){const e=(0,v.KR)(void 0),t=(0,v.KR)(""),n=n=>{const r=n;e.value=r.detail,t.value=""};return(0,a.sV)((()=>{y.wk.events.addEventListener(y.wk.RENDER_EVENT,n),y.wk.setComponentReady()})),(0,a.$u)((()=>{""!=t.value&&y.wk.setFrameHeight()})),(0,a.hi)((()=>{y.wk.events.removeEventListener(y.wk.RENDER_EVENT,n)})),(0,a.qG)((e=>{t.value=String(e)})),{renderData:e,componentError:t}}}),W=(0,k.A)(L,[["render",N],["__scopeId","data-v-bef81972"]]),O=W,P=(0,a.pM)({name:"App",components:{PdfViewer:$,WithStreamlitConnection:O}}),S=(0,k.A)(P,[["render",o]]),j=S;(0,r.Ef)(j).mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,(()=>{var e=[];n.O=(t,r,a,i)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,a,i]=e[c],s=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,a,i]}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{var e={524:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,i,[o,s,l]=r,d=0;if(o.some((t=>0!==e[t]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var c=l(n)}for(t&&t(r);d<o.length;d++)i=o[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},r=self["webpackChunkstreamlit_pdf_viewer"]=self["webpackChunkstreamlit_pdf_viewer"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[504],(()=>n(2707)));r=n.O(r)})();
//# sourceMappingURL=app.30ace43e.js.map